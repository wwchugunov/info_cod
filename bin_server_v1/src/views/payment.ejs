<!DOCTYPE html>
<html lang="uk">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> <%= company.name %></title>
    <link rel="stylesheet" href="/css/main.css">
</head>

<body>

    <header class="header">
        <div class="container header-container">
            <div class="header-text">
                <h1 class="frame__title">
                    <%= company.name %>
                </h1>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">

            <div class="total-box">
                <div class="field">
                    <span class="label">Сума:</span>
                    <% if (allowAmountEdit) { %>
                      <div class="value amount-edit">
                        <div class="amount-input-wrap">
                          <input
                            id="editable-amount"
                            class="amount-input"
                            type="number"
                            min="0.01"
                            step="0.01"
                            value="<%= Number(originalAmount || 0).toFixed(2) %>"
                          />
                          <span class="amount-currency">грн</span>
                        </div>
                      </div>
                    <% } else { %>
                      <span class="value" id="amount-value">
                        <%= Number(originalAmount || 0).toFixed(2) %> грн
                      </span>
                    <% } %>
                </div>
                <div class="field">
                    <span class="label">Комісія:</span>
                    <span class="value" id="commission-value">
                        <%= (Number(commissionPercent || 0) + Number(commissionFixed || 0)).toFixed(2) %> грн
                    </span>
                </div>
                <div class="field total">
                    <span>Разом:</span>
                    <span id="total-value">
                        <%= Number(finalAmount || 0).toFixed(2) %> грн
                    </span>
                </div>
            </div>

            <div class="payment-box">
                <div class="field popult">
                    <div class="label">Призначення:</div>
                    <div class="value left">
                        <%= purpose %>
                    </div>
                </div>
                <div class="field iban">
                    <span class="label">IBAN:</span>
                    <span class="value">
                        <%= company.iban %>
                    </span>
                </div>
                <div class="field">
                    <span class="label">ЄДРПОУ:</span>
                    <span class="value">
                        <%= company.edrpo %>
                    </span>
                </div>
            </div>

            <!-- Кнопка оплаты -->
            <div class="pay-button">
                <a href="<%= paymentUrl %>" class="pay-btn" id="pay-btn" data-link-id="<%= linkId %>" data-nbu-url="<%= paymentUrl %>" data-nbu-code="<%= paymentCode %>">Оплатити</a>
            </div>

            <!-- Кнопки банков -->
            <div class="bank-buttons" id="bankButtons">
                <button class="bank-btn" data-bank="mono"><img src="/img/monobank-logo.png" alt="" width="50"> Сплатити Mono</button>
                <button class="bank-btn" data-bank="privat24"><img src="/img/Privat24_Logo.png" alt="" width="50">Сплатити Privat</button>
                <button class="bank-btn" data-bank="abank"><img src="/img/a-bank.png" alt="" width="50"> Сплатити a-bank</button>
            </div>

            <!-- QR-код -->
            <div class="qr-box" id="qrBox">
                <img src="" alt="QR оплати">
                <p>Відскануйте QR-код для оплати</p>
            </div>

        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>© 2026 Всі права захищено</p>
        </div>
    </footer>

    <script>
        window.paymentConfig = {
            allowAmountEdit: <%= allowAmountEdit ? "true" : "false" %>,
            originalAmount: <%= Number(originalAmount || 0).toFixed(2) %>,
            finalAmount: <%= Number(finalAmount || 0).toFixed(2) %>,
            commissionPercentValue: <%= Number(company.commission_percent || 0) %>,
            commissionFixedValue: <%= Number(company.commission_fixed || 0) %>,
            usePercentCommission: <%= company.use_percent_commission ? "true" : "false" %>,
            useFixedCommission: <%= company.use_fixed_commission ? "true" : "false" %>,
            purpose: <%- JSON.stringify(purpose || "") %>,
            companyName: <%- JSON.stringify(company.name || "") %>,
            companyIban: <%- JSON.stringify(company.iban || "") %>,
            companyEdrpo: <%- JSON.stringify(company.edrpo || "") %>,
            bankQrBase: <%- JSON.stringify(bankQrBase || "") %>,
            paymentCode: <%- JSON.stringify(paymentCode) %>,
            paymentUrl: <%- JSON.stringify(paymentUrl) %>,
            linkId: <%- JSON.stringify(linkId) %>,
        };
    </script>
    <script src="/js/main.js" defer></script>

</body>

</html>
